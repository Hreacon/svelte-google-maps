<div ref:container>
  <slot />
</div>

<script>
  export default {
    oncreate() {
      const { map, lat, lng } = this.get();
      const paneType = 'float';
      const container = this.refs.container;

      const overlay = map.ready().then(({ api, instance }) => {
        const overlay = new api.OverlayView();

        overlay.onAdd = function() {
          const pane = this.getPanes()[`${paneType}Pane`];
          if (!pane) throw new Error(`No pane found for type "${paneType}"`);

          pane.appendChild(container);
        };
        overlay.draw = function() {
          // TODO
          const projection = this.getProjection();
          const position = new google.maps.LatLng(lat, lng);
          const translation = projection.fromLatLngToDivPixel(position);
        };

        overlay.setMap(instance);
        return overlay;
      });
      this.set({ overlay });
    }
  }
</script>
