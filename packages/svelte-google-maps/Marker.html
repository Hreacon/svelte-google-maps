<script>
  export default {
    oncreate() {
      let { map, lat, lng, title, label, icon, position } = this.get();
      if (lat && lng && !position) position = { lat: Number(lat), lng: Number(lng) };

      const marker = map.marker({ 
        position,
        title,
        label,
        icon
      });
      this.set({ marker });
    },

    async ondestroy() {
      const marker = await this.get('marker');
      marker.setMap(null);
    }
  }
</script>
