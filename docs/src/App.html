<div class="max-w-md mx-auto">
  <h1 class="mb-3 mt-6">Pulse Map</h1>

  <div ref:container>
    <Map :map defer bind:center bind:zoom>
      <Marker :map position={{center}} title="Richmond, VA" />
      <Marker :map lat=37.540725 lng=-77.236048 label="A" />
      <Marker :map lat=37.540725 lng=-77.336048 icon="https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png" />
      
      <Overlay :map lat=37.540725 lng=-77.436048>Overlay Content...</Overlay>
    </Map>
  </div>

  <p class="mt-4 text-center">
    Latitude: {{center.lat.toFixed(6)}} &mdash;
    Longitude: {{center.lng.toFixed(6)}} &mdash;
    <label for="zoom">Zoom</label>: <input type="range" min="1" max="12" bind:value="zoom" class="align-text-top" /> {{zoom}}
  </p>
</div>

<style>
  ref:container {
    height: 400px;
    border: solid 1px #ccc;
  }
</style>

<script>
  import { Context } from 'svelte-google-maps';
  import Map from 'svelte-google-maps/Map.html';
  import Marker from 'svelte-google-maps/Marker.html';
  import Overlay from 'svelte-google-maps/Overlay.html';

  const API_KEY = process.env.API_KEY;
  const RICHMOND = { lat: 37.540725, lng: -77.436048 };

  export default {
    components: { Map, Marker, Overlay },
    
    data() {
      return {
        map: new Context(API_KEY, { beta: true }),
        center: RICHMOND,
        zoom: 11,
      };
    }
  }
</script>
